(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{940:function(e,t,r){"use strict";r.r(t);var a=r(2),o=r.n(a),n=r(0),s=r.n(n),l=r(4),c=r.n(l),i=r(198),u=r(34),p=r.n(u),m=r(7),d=r.n(m),h=r(649),b=r.n(h),E=r(650),v=r.n(E);function g(){return s.a.createElement("svg",{className:"icon-file",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},s.a.createElement("g",{transform:"translate(-46.000000, -124.000000)"},s.a.createElement("g",{transform:"translate(28.000000, 110.000000)"},s.a.createElement("g",{transform:"translate(18.000000, 14.000000)"},s.a.createElement("path",{d:"M8,0 L12,4 L12,16 L0,16 L0,0 L8,0 Z M8,4 L11,4 L8,1 L8,4 Z"})))))}var f=r(856);function w(e){var{acceptedTypes:t,locked:r,multiple:a,onAccept:o,onReset:l}=e,[c,i]=Object(n.useState)(),[u,m]=Object(n.useState)(),h=Object(n.useCallback)((e,t)=>{0===e.length?(e=>{!a&&e.length>1?m("Choose a single file"):m("File type is incorrect"),i(void 0),l()})(t):(e=>{var t=e.length,r=t>1?"".concat(t," files"):e[0].name;i(r),o(e)})(e)},[]),{getRootProps:E,getInputProps:w,isDragActive:k}=Object(f.a)({accept:t,disabled:r,multiple:a,onDrop:h});Object(n.useEffect)(()=>{if(u){var e=setTimeout(()=>m(void 0),2500);return()=>clearTimeout(e)}},[u]);var N=u||"Drag a file, or click to choose",C=()=>s.a.createElement(n.Fragment,null,u?s.a.createElement(v.a,null):s.a.createElement(b.a,null),k?"Drop files here":N),D=()=>s.a.createElement(n.Fragment,null,s.a.createElement(g,null),s.a.createElement("span",{className:"importer-dropzone__filename"},c));return s.a.createElement("div",p()({},E(),{className:d()({"is-accepted":c},"importer-dropzone theme-color-border")}),s.a.createElement("input",w()),c?s.a.createElement(D,null):s.a.createElement(C,null))}w.propTypes={acceptedTypes:c.a.string,locked:c.a.bool.isRequired,multiple:c.a.bool,onAccept:c.a.func.isRequired,onReset:c.a.func.isRequired};var k=w,N=r(310),C=r(147),D=r(6),S=r(157),_=r(870),y=e=>s.a.createElement(_.a,p()({classes:{root:"progress-bar",bar:"progress-bar__bar"}},e));class V extends s.a.Component{shouldComponentUpdate(e){return!(!this.props.endValue&&this.props.isDone===e.isDone)}render(){var{currentValue:e,endValue:t,isDone:r}=this.props,a=()=>r?s.a.createElement(y,{variant:"determinate",value:100}):s.a.createElement(y,null);return t?s.a.createElement(y,{variant:"determinate",value:e/t*100}):s.a.createElement(a,null)}}o()(V,"propTypes",{currentValue:c.a.number.isRequired,endValue:c.a.number,isDone:c.a.bool.isRequired});var x=V,M=e=>{var t,{currentValue:r,isDone:a}=e,o=1===r?"note":"notes";return t=a?"Done! ".concat(r," ").concat(o," imported."):r?"".concat(r," ").concat(o," imported..."):"Importing...",s.a.createElement("p",{role:"status","aria-live":"polite"},t)};M.propTypes={currentValue:c.a.number.isRequired,isDone:c.a.bool.isRequired};var R=M,T=e=>{var{currentValue:t=0,endValue:r=0,isDone:a}=e;return s.a.createElement("section",null,s.a.createElement(x,{currentValue:t,endValue:a?t:r,isDone:a}),s.a.createElement(R,{currentValue:t,isDone:a}))};class L extends n.Component{constructor(){super(...arguments),o()(this,"state",{errorMessage:void 0,finalNoteCount:void 0,importedNoteCount:0,isDone:!1,setMarkdown:!1,shouldShowProgress:!1}),o()(this,"initImporter",()=>{var{slug:e}=this.props.source;return(e=>{switch(e){case"evernote":return r.e(9).then(r.bind(null,943));case"plaintext":return r.e(11).then(r.bind(null,934));case"simplenote":return r.e(10).then(r.bind(null,935))}})(e).then(t=>{var{default:r}=t,a=new r(this.props.importNote,{isMarkdown:this.state.setMarkdown}),o=Object(D.throttle)(e=>{this.setState({importedNoteCount:e})},20);return a.on("status",(t,r)=>{switch(t){case"progress":o(r);break;case"complete":this.setState({finalNoteCount:r,isDone:!0}),this.props.recordEvent("importer_import_completed",{source:e,note_count:r});break;case"error":this.setState({errorMessage:r,shouldShowProgress:!1}),window.setTimeout(()=>{this.setState({isDone:!0})},200)}}),a})}),o()(this,"startImport",()=>{this.setState({shouldShowProgress:!0}),this.props.onStart(),this.initImporter().then(e=>{e.importNotes(this.props.files)})})}render(){var{endValue:e,locked:t,onClose:r}=this.props,{optionsHint:a}=this.props.source,{errorMessage:o,finalNoteCount:n,importedNoteCount:l,isDone:c,setMarkdown:u,shouldShowProgress:p}=this.state;return s.a.createElement("div",{className:"source-importer-executor"},s.a.createElement("section",{className:"source-importer-executor__options"},s.a.createElement(i.a,{headingLevel:3},"Options"),s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",checked:u,className:"source-importer-executor__checkbox",disabled:t,onChange:()=>this.setState({setMarkdown:!u})}),"Enable Markdown on all notes"),a&&s.a.createElement("p",{className:"theme-color-fg-dim"},a)),s.a.createElement(N.a,{shouldMount:Boolean(o)},s.a.createElement("div",{role:"alert",className:"source-importer-executor__error"},o)),s.a.createElement(N.a,{shouldMount:p},s.a.createElement(T,{currentValue:c?n:l,endValue:e,isDone:c})),s.a.createElement("div",{className:"source-importer-executor__button"},c?s.a.createElement("button",{className:"button button-primary",type:"button",onClick:r},"Close"):s.a.createElement("button",{className:"button button-primary",disabled:t,type:"button",onClick:this.startImport},"Import")))}}var q={importNote:S.a.data.importNote,recordEvent:S.a.analytics.recordEvent},j=Object(C.b)(null,q)(L);class I extends s.a.Component{constructor(){super(...arguments),o()(this,"state",{acceptedFiles:void 0})}render(){var{buckets:e,onClose:t,onStart:r,locked:a=!1,source:o}=this.props,{acceptedTypes:n,instructions:l,multiple:c=!1}=this.props.source,{acceptedFiles:u}=this.state,p=Boolean(u);return s.a.createElement("div",{className:"source-importer"},s.a.createElement(i.a,{headingLevel:"3"},"Import file",c&&"s"),s.a.createElement(k,{acceptedTypes:n,locked:a,multiple:c,onAccept:e=>this.setState({acceptedFiles:e}),onReset:()=>this.setState({acceptedFiles:void 0})}),!p&&s.a.createElement("p",{className:"theme-color-fg-dim"},l),s.a.createElement(N.a,{wrapperClassName:"source-importer__executor-wrapper",shouldMount:p},s.a.createElement(j,{buckets:e,endValue:c&&p?u.length:void 0,files:u,locked:a,onClose:t,onStart:r,source:o})))}}o()(I,"propTypes",{buckets:c.a.object,locked:c.a.bool,onClose:c.a.func.isRequired,onStart:c.a.func.isRequired,source:c.a.shape({acceptedTypes:c.a.string,instructions:c.a.string,multiple:c.a.bool})});t.default=I}}]);